<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Arcade · 10 Niveles</title>

  <!-- Fuente y Bootstrap -->
  <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@500;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet"/>

  <style>
    :root{
      --cyan:#00e5ff; --pink:#ff3ca6; --yellow:#ffd166;
      --glass: rgba(13,16,28,.78); --glassbd: rgba(255,255,255,.12);
    }
    html, body { height:100%; background:#000; font-family:"Chakra Petch", system-ui, sans-serif; }
    .page{
      min-height:100vh; display:flex; align-items:center; justify-content:center; padding:28px;
      background:
        radial-gradient(70vw 50vh at 15% 10%, rgba(0,229,255,.10), transparent 60%),
        radial-gradient(70vw 50vh at 85% 90%, rgba(255,60,166,.10), transparent 60%),
        #000;
    }

    .stage-card{
      width:100%; max-width:1080px; overflow:hidden; border-radius:18px;
      background:#0b0f1a; border:1px solid var(--glassbd);
      box-shadow: 0 30px 90px rgba(0,0,0,.7), inset 0 0 0 1px rgba(255,255,255,.04);
    }
    .stage-header{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border-bottom:1px solid var(--glassbd);
      color:#dff9ff; text-shadow:0 0 10px rgba(0,229,255,.35);
    }
    .brand-chip{
      border:1px solid rgba(0,229,255,.5); color:var(--cyan); background:rgba(0,229,255,.07);
      font-weight:900; letter-spacing:.08em; text-transform:uppercase;
    }

    /* Botonera estilo arcade (NO afecta modales) */
    .stage-header .btn-arcade{
      border-radius:12px; font-weight:800; letter-spacing:.04em;
      border:1px solid rgba(255,255,255,.22); background:rgba(255,255,255,.06); color:#eafcff;
      box-shadow: 0 10px 24px rgba(0,0,0,.25);
    }
    .stage-header .btn-arcade:hover{ background:rgba(255,255,255,.10); color:#fff; }
    .stage-header .btn-arcade:disabled{ opacity:.45; }
    .stage-header .btn-arcade.play { border-color: rgba(0,229,255,.5); color:#00313a; background: var(--cyan); }
    .stage-header .btn-arcade.reset{ border-color: rgba(255,255,255,.35); }

    .stage{
      position:relative; width:min(94vw, 1000px); height:min(64vh, 600px);
      background: radial-gradient(80% 100% at 50% 120%, rgba(255,60,166,.08), transparent 50%), #04060a;
      border-top:1px solid rgba(255,255,255,.04);
    }
    .stage::before{
      content:""; position:absolute; inset:0; pointer-events:none;
      background:
        repeating-linear-gradient(0deg, rgba(255,255,255,.03) 0 1px, transparent 1px 28px),
        repeating-linear-gradient(90deg, rgba(255,255,255,.03) 0 1px, transparent 1px 28px);
      mask: radial-gradient(130% 100% at 50% 120%, #000 65%, transparent 80%);
    }
    .stage::after{
      content:""; position:absolute; inset:0; pointer-events:none; border-radius:18px;
      box-shadow: inset 0 0 0 2px rgba(0,229,255,.15), inset 0 0 60px rgba(0,229,255,.12),
                  inset 0 0 60px rgba(255,60,166,.10);
    }
    canvas{ display:block; width:100%; height:100%; background:#000; }

    .hud{
      position:absolute; top:10px; left:10px; z-index:10;
      padding:10px 12px; border-radius:14px; color:#eafcff;
      background:var(--glass); border:1px solid var(--glassbd);
      box-shadow:0 18px 40px rgba(0,0,0,.35); font-size:14px; letter-spacing:.3px;
    }
    .hud .label{ color:#92a3b2; } .hud .val{ font-weight:900; text-shadow:0 0 10px rgba(0,229,255,.22); }

    .chips{ position:absolute; top:10px; right:10px; z-index:10; display:flex; gap:8px; flex-wrap:wrap; }
    .chip{
      display:flex; gap:8px; align-items:center; border-radius:999px; padding:6px 10px;
      color:#fff; border:1px solid var(--glassbd); background:rgba(255,255,255,.06); backdrop-filter:blur(6px);
    }
    .chip .dot{ width:10px; height:10px; border-radius:999px; box-shadow:0 0 12px currentColor; }
    .dot-cyan{ color:#00e5ff; background:#00e5ff; } .dot-pink{ color:#ff3ca6; background:#ff3ca6; }

    /* ✨ IMPORTANTE:
       Quitamos CUALQUIER estilo global a .modal para NO cambiar tu diseño.
       Si alguna vez quieres reestilizar modales, crea una clase contenedora
       (p.ej. .arcade-modal .modal-content{...}) y APLÍCALa al modal. */
  </style>
</head>
<body>
  <div class="page">
    <div class="card stage-card">
      <!-- Header con botonera -->
      <div class="stage-header d-flex justify-content-between align-items-center px-3 py-2">
        <div class="d-flex align-items-center gap-2">
          <span class="badge brand-chip rounded-pill px-3 py-2">ARCADE MODE</span>
          <span class="text-secondary small">10 niveles · 10 objetivos por nivel</span>
        </div>

        <div class="d-flex align-items-center gap-2">
          <button id="btnStart"  class="btn btn-arcade play"><i class="bi bi-play-fill me-1"></i> Iniciar</button>
          <button id="btnPause"  class="btn btn-arcade" disabled><i class="bi bi-pause-fill me-1"></i> Pausa</button>
          <button id="btnResume" class="btn btn-arcade" disabled><i class="bi bi-play-circle me-1"></i> Reanudar</button>
          <button id="btnReset"  class="btn btn-arcade reset" disabled><i class="bi bi-arrow-counterclockwise me-1"></i> Reiniciar</button>
        </div>
      </div>

      <!-- Escenario -->
      <div id="stage" class="stage">
        <!-- HUD -->
        <div class="hud">
          <div><span class="label">Nivel</span> <span id="level" class="val ms-2">—</span></div>
          <div><span class="label">Eliminados</span> <span id="killed" class="val ms-2">0/10</span></div>
          <div><span class="label">Porcentaje</span> <span id="percent" class="val ms-2">0%</span></div>
        </div>
        <!-- Chips -->
        <div class="chips">
          <div class="chip"><span class="dot dot-cyan"></span> <span>Velocidad prog.</span></div>
          <div class="chip"><span class="dot dot-pink"></span> <span>10 rondas</span></div>
        </div>
        <!-- Canvas -->
        <canvas id="canvas"></canvas>
      </div>
    </div>
  </div>

  <!-- Modal resultados por nivel (SIN estilos custom: usa Bootstrap puro) -->
  <div class="modal fade" id="resultModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title fw-bold">Resultados — Nivel <span id="rmLevel">1</span></h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
        </div>
        <div class="modal-body">
          <div class="progress"><div id="rmEffBar" class="progress-bar" style="width:0%"></div></div>
          <div class="text-end small mt-1">Eficiencia: <span id="rmEff">0%</span></div>
          <div class="row g-3 mt-2">
            <div class="col-6">
              <ul class="list-group">
                <li class="list-group-item d-flex justify-content-between"><span>Eliminadas</span><strong id="rmKilled">0</strong></li>
                <li class="list-group-item d-flex justify-content-between"><span>Escapadas</span><strong id="rmEscaped">0</strong></li>
              </ul>
            </div>
            <div class="col-6">
              <ul class="list-group">
                <li class="list-group-item d-flex justify-content-between"><span>Tiempo</span><strong id="rmTime">0.0 s</strong></li>
                <li class="list-group-item d-flex justify-content-between"><span>Objetivos</span><strong>10</strong></li>
              </ul>
            </div>
          </div>
        </div>
        <div class="modal-footer d-flex gap-2">
          <button type="button" class="btn btn-outline-secondary" id="rmEnd">
            <i class="bi bi-flag me-1"></i> Terminar
          </button>
          <button type="button" class="btn btn-info text-dark fw-bold" id="rmNext">
            <i class="bi bi-skip-end-fill me-1"></i> Siguiente nivel
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal resumen final (también Bootstrap puro) -->
  <div class="modal fade" id="summaryModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title fw-bold">Resumen de la partida</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
        </div>
        <div class="modal-body">
          <div class="table-responsive">
            <table class="table table-striped align-middle mb-3" id="summaryTable">
              <thead>
                <tr><th class="text-center">#</th><th>Eliminadas</th><th>Escapadas</th><th>Eficiencia</th><th>Tiempo (s)</th></tr>
              </thead>
              <tbody></tbody>
              <tfoot>
                <tr class="fw-bold"><td>Total</td><td id="sumKilled">0</td><td id="sumEscaped">0</td><td id="sumEff">0%</td><td id="sumTime">0.0</td></tr>
              </tfoot>
            </table>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-info text-dark fw-bold" id="summaryRestart">
            <i class="bi bi-arrow-repeat me-1"></i> Reiniciar
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS + tu juego -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="js/main.js"></script>
</body>
</html>
